<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <link rel="stylesheet" href="css/layout.css" type="text/css">
    <link rel="stylesheet" href="js/ol3/ol.css" type="text/css">
    <link rel="stylesheet" href="js/ol3/ol3-popup.css" type="text/css">
    <script src="js/everpolate.browserified.min.js" type="text/javascript"></script>
    <script src="js/ol3/ol-debug.js" type="text/javascript"></script>
    <script src="js/ol3/ol3-popup.js" type="text/javascript"></script>
    <script src="js/joose.js" type="text/javascript"></script>    
	<script src="js/app/Styles.js" type="text/javascript"></script>
	<script src="js/app/Utils.js" type="text/javascript"></script>
	<script src="js/app/Config.js" type="text/javascript"></script>
	<script src="js/app/GUI.js" type="text/javascript"></script>
	<script src="js/app/Track.js" type="text/javascript"></script>
    <script src="js/app/Participant.js" type="text/javascript"></script>
	<script src="js/app/Simulator.js" type="text/javascript"></script>
	<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>	
	<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
    <title>Tracking Example</title>
  </head>
  <body onLoad="">
	<div id="map" class="map">		
	</div>
	<script>
window.TRACK = new Track();
window.GUI = new GUI(
	{
		track		: TRACK,
		initialZoom : 11
		//initialPos  : [lon,lat],
	});
//---------------------------------------------
function initGUI() 
{
	var scoef = 6;//4.729;
	GUI.setInitialPos(TRACK.getCenter());
	GUI.init();
	var p1 = TRACK.newParticipant("A01","F0A120FC1270","The Champion");
	p1.setIcon("img/player1.png");
	p1.setImage("img/profile1.png");
	p1.setColor(increaseBrightness("#ff5454"),30);
	p1.setAge(32);
	var sim1 = new Simulator();
	sim1.simulateParticipantSimple(p1,30*scoef);

	var p1 = TRACK.newParticipant("A02","X0A120FCF20","NewBoss");	
	p1.setIcon("img/player2.png");
	p1.setImage("img/profile2.png");
	p1.setColor(increaseBrightness("#3cb35a",30));
	p1.setAge(26);
	var sim1 = new Simulator();
	sim1.simulateParticipantSimple(p1,60*scoef);

	var p1 = TRACK.newParticipant("A03","J0A120FCF20","SomeOne");	
	p1.setIcon("img/player3.png");
	p1.setImage("img/profile3.png");
	p1.setColor(increaseBrightness("#3ca6b3",30));
	var sim1 = new Simulator();
	sim1.simulateParticipantSimple(p1,45*scoef);

}
//----------------------
var trackData = localStorage.getItem("CURRENT_TRACK");
if (trackData != null) 
{
	trackData=JSON.parse(trackData);
	TRACK.setRoute(trackData);
	initGUI();
} else {
	$("#map").html("<div style='padding-left:20px;'><h1>Track not specified!</h1>Please visit <a href='track.html'>this link</a></h1></div>");	
}	
</script>
  </body>
</html>
